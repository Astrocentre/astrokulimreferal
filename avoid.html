<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Avoid The Bomb - Space Edition</title>
<style>
  html, body {
    margin: 0; padding: 0; overflow: hidden; height: 100%; background: black;
    touch-action: none; user-select: none;
  }
  canvas {
    display: block;
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: radial-gradient(ellipse at center, #000000 0%, #0a0a1a 80%);
    cursor: none;
  }
  #score {
    position: fixed;
    top: 15px;
    left: 50%;
    transform: translateX(-50%);
    color: #00f9ff;
    font-family: 'Orbitron', monospace, sans-serif;
    font-weight: 700;
    font-size: 24px;
    text-shadow: 0 0 8px #00f9ff;
    pointer-events: none;
    user-select: none;
    z-index: 10;
  }
  :focus {
    outline: none;
  }
</style>
</head>
<body>
<canvas id="game"></canvas>
<div id="score">Score: 0</div>

<script>
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');

  let w = canvas.width = window.innerWidth;
  let h = canvas.height = window.innerHeight;

  // Stars background
  const starsCount = 150;
  const stars = [];
  for(let i = 0; i < starsCount; i++) {
    stars.push({
      x: Math.random() * w,
      y: Math.random() * h,
      size: Math.random() * 1.5,
      speed: 0.5 + Math.random() * 1.5
    });
  }

  // Images
  const playerImg = new Image();
  playerImg.src = 'https://cdn-icons-png.flaticon.com/512/833/833314.png'; // spaceship

  const asteroidImg = new Image();
  asteroidImg.src = 'https://cdn-icons-png.flaticon.com/512/657/657257.png'; // asteroid

  // Player object
  const player = {
    width: 50,
    height: 50,
    x: w / 2 - 25,
    y: h - 100,
    speed: 25
  };

  let bombs = [];
  let score = 0;
  let gameOver = false;

  function spawnBomb() {
    bombs.push({
      x: Math.random() * (w - 40),
      y: -50,
      size: 40,
      speed: 2 + Math.random() * 3
    });
  }

  function update() {
    // Move stars down
    stars.forEach(s => {
      s.y += s.speed;
      if(s.y > h) s.y = 0;
    });

    // Move bombs
    bombs.forEach(bomb => bomb.y += bomb.speed);

    // Remove bombs out of screen
    bombs = bombs.filter(b => b.y < h + b.size);

    // Check collision
    bombs.forEach(bomb => {
      if(
        bomb.x < player.x + player.width &&
        bomb.x + bomb.size > player.x &&
        bomb.y < player.y + player.height &&
        bomb.y + bomb.size > player.y
      ) {
        gameOver = true;
      }
    });

    if(!gameOver) score++;
  }

  function draw() {
    // Clear & draw starfield
    ctx.clearRect(0, 0, w, h);

    // Draw stars
    ctx.fillStyle = 'white';
    stars.forEach(s => {
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
      ctx.fill();
    });

    // Draw player
    if(playerImg.complete) {
      ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);
    } else {
      ctx.fillStyle = '#00f9ff';
      ctx.fillRect(player.x, player.y, player.width, player.height);
    }

    // Draw bombs
    bombs.forEach(bomb => {
      if(asteroidImg.complete) {
        ctx.drawImage(asteroidImg, bomb.x, bomb.y, bomb.size, bomb.size);
      } else {
        ctx.fillStyle = 'red';
        ctx.beginPath();
        ctx.arc(bomb.x + bomb.size/2, bomb.y + bomb.size/2, bomb.size/2, 0, Math.PI * 2);
        ctx.fill();
      }
    });

    // Update score display
    document.getElementById('score').textContent = 'Score: ' + score;

    if(gameOver) {
      ctx.fillStyle = '#00f9ff';
      ctx.font = 'bold 60px Orbitron, monospace';
      ctx.textAlign = 'center';
      ctx.fillText('GAME OVER', w/2, h/2 - 20);
      ctx.font = '30px Orbitron, monospace';
      ctx.fillText('Final Score: ' + score, w/2, h/2 + 40);
    }
  }

  function gameLoop() {
    if(!gameOver) {
      update();
    }
    draw();
    if(!gameOver) requestAnimationFrame(gameLoop);
  }

  // Controls: touch & keyboard
  // Touch controls for mobile (touch left/right half screen to move)
  canvas.addEventListener('touchstart', e => {
    e.preventDefault();
    const touchX = e.touches[0].clientX;
    if(touchX < w / 2) {
      player.x = Math.max(player.x - player.speed, 0);
    } else {
      player.x = Math.min(player.x + player.speed, w - player.width);
    }
  }, { passive: false });

  // Touch drag moves player
  canvas.addEventListener('touchmove', e => {
    e.preventDefault();
    const touchX = e.touches[0].clientX;
    player.x = Math.min(Math.max(touchX - player.width / 2, 0), w - player.width);
  }, { passive: false });

  // Keyboard controls
  document.addEventListener('keydown', e => {
    if(gameOver) return; // no control after game over
    if(e.key === 'ArrowLeft' || e.key === 'a') {
      player.x = Math.max(player.x - player.speed, 0);
    } else if(e.key === 'ArrowRight' || e.key === 'd') {
      player.x = Math.min(player.x + player.speed, w - player.width);
    }
  });

  // Spawn bombs interval
  setInterval(() => { if(!gameOver) spawnBomb(); }, 800);

  // Resize handler
  window.addEventListener('resize', () => {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
    player.y = h - 100;
  });

  gameLoop();
})();
</script>
</body>
</html>
